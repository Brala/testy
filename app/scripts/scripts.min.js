"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var list=document.getElementById("list"),searchInput=document.getElementById("searchInput"),searchButton=document.getElementById("searchButton"),yearsSelector=document.getElementById("years"),tagsSelector=document.getElementById("tags"),globalData="",yearsList=[],tagsList=[];function fetchData(){fetch("data.json").then(function(e){return e.json()}).then(function(e){e.map(function(e){return e.date=new Date(e.date)}),(globalData=e).forEach(function(e){var t=e.date.getFullYear();yearsList.push(t),yearsList=[].concat(_toConsumableArray(new Set(yearsList)))}),yearsList.sort(function(e,t){return e-t}),yearsSelector.innerHTML=yearsList.map(function(e){return"<option>"+e+"</option>"}),yearsSelector.selectedIndex=yearsSelector.options.length-1;var t=yearsSelector.options[yearsSelector.selectedIndex].text;filterByYear(globalData,t),e.forEach(function(e){var t=e.category;tagsList.push(t),tagsList=[].concat(_toConsumableArray(new Set(tagsList)))});var n="";tagsList.forEach(function(e,t){return n+='\n                <div class="formrow">\n                <input class="checkbox" type="checkbox" name="check'+t+'" id="check'+t+'">\n                <label class="checklabel" for="check'+t+'">'+e+"</label>\n                </div>\n                "}),tagsSelector.innerHTML=n,tagsList.map(function(e,t){document.getElementById("check"+t).addEventListener("click",function(){return filterByTag(globalData)})})})}function filterByYear(e,t){renderData(e.filter(function(e){return e.date.getFullYear()==t}))}function filterByTag(e,t){var n=tagsList.filter(function(e,t){return document.getElementById("check"+t).checked?e:null});renderData(e.filter(function(e){return e.category===n[0]||e.category===n[1]||e.category===n[2]||e.category===n[3]}))}function filterByChars(e,t){renderData(e.filter(function(e){return e.title.includes(t)||e.description.includes(t)}))}function renderData(e){var c="";e.forEach(function(e){var t=e.date,n=t.getHours()+":"+t.getMinutes(),a=t.getDate()+"."+t.getMonth()+"."+t.getFullYear(),r="";e.files.forEach(function(e){return r+="<a>Pobierz "+e.filename+".pdf    ("+e.filesize+"kB)</a>"}),console.log(r);var i=0===e.files.length?"":1===e.files.length?"<a>Pobierz "+e.files[0].filename+".pdf    ("+e.files[0].filesize+"kB)</a>":"<a>Pliki do pobrania("+e.files.length+")</a><hr>"+r;c+='\n        <div class="block clear-fix">\n            <div class="raport-info f-left">\n                <p>'+a+"</p>\n                <p>"+n+"</p>\n                <p>"+e.category+'</p>\n            </div>\n            <div class="raport f-left">\n                <h2>'+e.title+"</h2>\n                <p>"+e.description+'</p>\n                <div class="f-left">\n                    <a>Zobacz raport</a>\n                </div>\n                <div class="f-left">\n                    '+i+"\n                </div>\n            </div>\n        </div>\n        ",console.log(c)}),list.innerHTML=""===c?"Brak wyników spełniających kryteria":c}window.addEventListener("load",fetchData()),searchButton.addEventListener("click",function(){return filterByChars(globalData,searchInput.value)}),yearsSelector.addEventListener("change",function(){return filterByYear(globalData,yearsSelector.value)});
//# sourceMappingURL=scripts.min.js.map
