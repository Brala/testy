"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var list=document.getElementById("list"),searchInput=document.getElementById("searchInput"),searchButton=document.getElementById("searchButton"),yearsSelector=document.getElementById("years"),tagsSelector=document.getElementById("tags"),globalData=[],yearsList=["Wszystkie"],tagsList=[],form=document.getElementById("form");function fetchData(){fetch("data.json").then(function(e){return e.json()}).then(function(e){e.map(function(e){return e.date=new Date(e.date)}),(globalData=e).forEach(function(e){var t=e.date.getFullYear();yearsList.push(t),yearsList=[].concat(_toConsumableArray(new Set(yearsList)))}),yearsList.sort(function(e,t){return e-t});yearsSelector.innerHTML='<i class="arrow arrow-down"></i> '+yearsList.map(function(e){return"<option>"+e+"</option>"}),yearsSelector.selectedIndex=yearsSelector.options.length-1;yearsSelector.options[yearsSelector.selectedIndex].text;e.forEach(function(e){var t=e.category;tagsList.push(t),tagsList=[].concat(_toConsumableArray(new Set(tagsList)))});var n='\n                <div class="form--row">\n                    <input class="checkbox" type="checkbox" name="checkAll" id="checkAll" checked>\n                    <label class="checklabel" for="checkAll">Wszystkie <span>&#x2716;</span></label>\n                </div>\n            ';tagsList.forEach(function(e,t){return n+='\n                <div class="form--row">\n                    <input class="checkbox" type="checkbox" name="check'+t+'" id="check'+t+'">\n                    <label class="checklabel" for="check'+t+'">'+e+"<span>&#x2716;</span></label>\n                </div>\n                "}),tagsSelector.innerHTML=n,document.getElementById("checkAll").addEventListener("click",function(){return filterAll(globalData,yearsSelector.value,searchInput.value)}),tagsList.map(function(e,t){document.getElementById("check"+t).addEventListener("click",function(){return filterAll(globalData,yearsSelector.value,searchInput.value)})}),filterAll(globalData,yearsSelector.value,searchInput.value)})}function filterAll(e,t,n,a){var r=void 0;r=(r="Wszystkie"!==t?e.filter(function(e){return e.date.getFullYear()==t}):e).filter(function(e){return e.title.includes(n)||e.description.includes(n)});var l=tagsList.filter(function(e,t){return document.getElementById("check"+t).checked?e:null});document.getElementById("checkAll").checked||(r=r.filter(function(e){return e.category===l[0]||e.category===l[1]||e.category===l[2]||e.category===l[3]})),renderData(r)}function renderData(e){var i="",s=0;e.forEach(function(e,t){var n=e.date,a=("0"+n.getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2),r=("0"+n.getDate()).slice(-2)+"."+("0"+n.getMonth()).slice(-2)+"."+n.getFullYear(),l="";e.files.forEach(function(e){return l+="\n                <a>\n                    Pobierz "+e.filename+".pdf    ("+e.filesize+"kB)\n                </a>"});var c=0===e.files.length?"":1===e.files.length?" <a>\n                    Pobierz "+e.files[0].filename+".pdf    ("+e.files[0].filesize+"kB)\n                </a>":' <a class="block--raport--files--toggled" id="toggleFiles'+s+'"}>\n                    Pliki do pobrania ('+e.files.length+')     \n                    <i class="arrow arrow-down"></i>\n                </a>\n                <div class="hidden" id="visibleFiles'+s+'">\n                    <hr>\n                    '+l+"\n                </div>";2<=e.files.length&&s++,i+='\n            <div class="block clear-fix">\n                <div class="block--date-category f-left">\n                    <p><b>'+r+"</b></p>\n                    <p><b>"+a+"</b></p>\n                    <p>"+e.category+'</p>\n                </div>\n                <div class="block--raport f-left">\n                    <h2>'+e.title+"</h2>\n                    <p>"+e.description+'</p>\n                    <div class="f-left">\n                        <a>Zobacz raport</a>\n                    </div>\n                    <div class="block--raport--files f-left">\n                        '+c+"\n                    </div>\n                </div>\n            </div>\n        "}),list.innerHTML=""===i?"Brak wyników spełniających kryteria":i;for(var t=function(e){document.getElementById("toggleFiles"+e).addEventListener("click",function(){document.getElementById("visibleFiles"+e).classList.toggle("hidden"),document.querySelector("#toggleFiles"+e+" i").classList.toggle("arrow-up")})},n=0;n<s;n++)t(n)}form.addEventListener("submit",function(e){return e.preventDefault()}),window.addEventListener("load",fetchData()),yearsSelector.addEventListener("change",function(){return filterAll(globalData,yearsSelector.value,searchInput.value)}),searchButton.addEventListener("click",function(){return filterAll(globalData,yearsSelector.value,searchInput.value)});
//# sourceMappingURL=scripts.min.js.map
