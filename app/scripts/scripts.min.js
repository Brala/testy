"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var searchInput=document.getElementById("formSearchInput"),searchButton=document.getElementById("formSearchButton"),yearsSelector=document.getElementById("formYears"),tagsSelector=document.getElementById("formTags"),globalReportsData=[],yearsList=["Wszystkie"],tagsList=[];function fetchData(){fetch("data.json").then(function(e){return e.json()}).then(function(e){e.map(function(e){return e.date=new Date(e.date)}),globalReportsData=[].concat(_toConsumableArray(e)),renderFiltersForm(),filterReportsByAllConditions(yearsSelector.value,searchInput.value)}).catch(function(e){return console.error(e)})}function filterReportsByAllConditions(t,n){var e=void 0;e=(e="Wszystkie"!==t?globalReportsData.filter(function(e){return e.date.getFullYear()==t}):globalReportsData).filter(function(e){return e.title.includes(n)||e.description.includes(n)});var r=tagsList.filter(function(e,t){return document.getElementById("check"+t).checked?e:null});document.getElementById("checkAll").checked||(e=e.filter(function(t){return r.some(function(e){return e===t.category})})),renderReportsData(e)}function renderFiltersForm(){globalReportsData.forEach(function(e){var t=e.date.getFullYear();yearsList.push(t)}),(yearsList=[].concat(_toConsumableArray(new Set(yearsList)))).sort(function(e,t){return e-t});yearsSelector.innerHTML='<i class="arrow arrow-down"></i> '+yearsList.map(function(e){return"<option>"+e+"</option>"}),yearsSelector.selectedIndex=yearsSelector.options.length-1,globalReportsData.forEach(function(e){var t=e.category;tagsList.push(t)}),tagsList=[].concat(_toConsumableArray(new Set(tagsList)));var n='\n        <div class="form--row">\n            <input class="checkbox" type="checkbox" name="checkAll" id="checkAll" checked>\n            <label class="checklabel" for="checkAll">Wszystkie <span>&#x2716;</span></label>\n        </div>\n        ';tagsList.forEach(function(e,t){return n+='\n        <div class="form--row">\n            <input class="checkbox" type="checkbox" name="check'+t+'" id="check'+t+'">\n            <label class="checklabel" for="check'+t+'">'+e+"<span>&#x2716;</span></label>\n        </div>\n        "}),tagsSelector.innerHTML=n,document.getElementById("checkAll").addEventListener("click",function(){return filterReportsByAllConditions(yearsSelector.value,searchInput.value)}),tagsList.map(function(e,t){document.getElementById("check"+t).addEventListener("click",function(){return filterReportsByAllConditions(yearsSelector.value,searchInput.value)})})}function renderReportsData(e){var c=!1,s=0;e.forEach(function(e,t){var n=e.date,r=("0"+n.getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2),a=("0"+n.getDate()).slice(-2)+"."+("0"+n.getMonth()).slice(-2)+"."+n.getFullYear(),l="";e.files.forEach(function(e){return l+="\n                <a>\n                    Pobierz "+e.filename+".pdf    ("+e.filesize+"kB)\n                </a>\n                "});var o=0===e.files.length?"":1===e.files.length?" \n                <a>\n                    Pobierz "+e.files[0].filename+".pdf    ("+e.files[0].filesize+"kB)\n                </a>\n                ":' \n                <a class="block--raport--files--toggled" id="toggleFiles'+s+'"}>\n                    Pliki do pobrania ('+e.files.length+')     \n                    <i class="arrow arrow-down"></i>\n                </a>\n                <div class="hidden" id="visibleFiles'+s+'">\n                    <hr>\n                    '+l+"\n                </div>\n                ";2<=e.files.length&&s++,c+='\n            <div class="block clear-fix">\n                <div class="block--date-category f-left">\n                    <p><b>'+a+"</b></p>\n                    <p><b>"+r+"</b></p>\n                    <p>"+e.category+'</p>\n                </div>\n                <div class="block--raport f-left">\n                    <h2>'+e.title+"</h2>\n                    <p>"+e.description+'</p>\n                    <div class="f-left">\n                        <a>Zobacz raport</a>\n                    </div>\n                    <div class="block--raport--files f-left">\n                        '+o+"\n                    </div>\n                </div>\n            </div>\n            "});var t=document.getElementById("reportsList");console.log(c),t.innerHTML=c||"Brak wyników spełniających kryteria";for(var n=function(e){document.getElementById("toggleFiles"+e).addEventListener("click",function(){document.getElementById("visibleFiles"+e).classList.toggle("hidden"),document.querySelector("#toggleFiles"+e+" i").classList.toggle("arrow-up")})},r=0;r<s;r++)n(r)}document.getElementById("form").addEventListener("submit",function(e){return e.preventDefault()}),window.addEventListener("load",fetchData()),yearsSelector.addEventListener("change",function(){return filterReportsByAllConditions(yearsSelector.value,searchInput.value)}),searchButton.addEventListener("click",function(){return filterReportsByAllConditions(yearsSelector.value,searchInput.value)});
//# sourceMappingURL=scripts.min.js.map
